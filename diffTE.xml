<!--     
    Copyright (C) 2015 Laurent Modolo

    This file is part of TEtools suite for galaxy.

    TEtools is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    TEtools is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with TEtools.  If not, see <http://www.gnu.org/licenses/>.
-->

<tool id="diffTE" name="diffTE" version="1.0.0" hidden="false">
    <description>fastq quality trimming</description>
    <version_command interpreter="Rscript">diffTE.R -version=TRUE</version_command>
    <command interpreter="Rscript">diffTE.R --args --FDR_level=$FDR_level --count_column=$count_column --count_file=\"$count_file\" experiment_formula=\"$experiment_formula\" --sample_names=\"$sample_names\" --outdir=\"$htmlfile.files_path\" --htmlfile=\"$htmlfile\" 2> \dev\null
    </command>

    <inputs>
        <param name="count_file" type="data" format="tabular" label="count file computed with the countTE file" />
        <param name="count_column" type="integer" value="2" label="number of the first column of count in the count file"/>
        <param name="sample_names" area="True" size="5x180" type="text" value="population_1:method_2,population_1:method_2,...,population_n:method_1,population_n:method_2" label="comma separated list of names of the differents sample in the same order as the count file columns (example for n samples with 2 methods:
            population_1:method_2,population_1:method_2,...,population_n:method_1,population_n:method_2)"/>
        <param name="experiment_formula" area="True" size="1x180" type="text" value="population:method" label="formula corresponding to the name (name_of_variable_1:name_of_variable_2:...:name_of_variable_N"/>
        <param name="FDR_level" type="float" value="0.05" min="0.0" max="1.0" label="FDR threshold for the analysis"/>
    </inputs>

    <outputs>
        <data format="html" name="htmlfile" label="diffTE_results.html" />
    </outputs>

    <requirements>
        <requirement type="package">Rscript</requirement>
    </requirements>

    <help>
diffTE documentation:
======================
Perform differential expression analysis using DESeq2 and the count table generated by countTE
This tool produces an HTML output with clickable image, that leads to a download of the PDF file.
    </help>
</tool>
